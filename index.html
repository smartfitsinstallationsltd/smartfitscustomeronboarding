<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>SmartFits Customer Onboarding</title>

  <!-- ✅ Make sure these paths match your repo exactly -->
  <link rel="stylesheet" href="/assets/styles.css" />

  <!-- Optional: nicer default background if image fails -->
  <meta name="theme-color" content="#020617" />
</head>

<body>
  <div class="container">

    <!-- HEADER -->
    <header class="header">
      <div class="brand">
        <!-- ✅ If your logo file name differs, change it here -->
        <img src="/images/smartfits_logo.png" alt="SmartFits logo" />
        <div class="brandTitle">
          <div class="top">SMARTFITS</div>
          <div class="sub">Customer Onboarding</div>
        </div>
      </div>

      <button type="button" class="chip" id="openAdminBtn">Sign in as an Admin</button>
    </header>

    <!-- HERO -->
    <section class="hero" aria-label="Welcome">
      <h1>SmartFits Installations Ltd</h1>
      <p>
        Thank you for choosing SmartFits Installations Ltd. We appreciate your business and the trust you have placed in our team.
        Established in 2007, SmartFits specialises in the professional installation and deployment of vehicle safety equipment and fleet
        management software, supporting safer, more efficient, and compliant fleet operations.
      </p>
    </section>

    <!-- CLIENT INFORMATION FORM -->
    <section class="section" id="deployment">
      <h2>Client Information &amp; Form</h2>
      <p class="desc">Please complete the details below to help us set up your account and begin deployment smoothly.</p>

      <form id="deploymentForm" autocomplete="on">

        <div class="formGrid">
          <div class="field">
            <label for="fullCompanyName">Full Company Name *</label>
            <input id="fullCompanyName" name="fullCompanyName" required />
          </div>

          <div class="field">
            <label for="vatNumber">VAT Number</label>
            <input id="vatNumber" name="vatNumber" />
          </div>

          <div class="field">
            <label for="companyRegNumber">Company Registration Number</label>
            <input id="companyRegNumber" name="companyRegNumber" />
          </div>

          <div class="field">
            <label for="poNumber">Purchase Order Number (if required)</label>
            <input id="poNumber" name="poNumber" />
          </div>

          <div class="field" style="grid-column: 1 / -1;">
            <label for="invoiceAddress">Invoice Address *</label>
            <textarea id="invoiceAddress" name="invoiceAddress" required></textarea>
          </div>

          <div class="field">
            <label for="accountsContactName">Accounts Contact Name *</label>
            <input id="accountsContactName" name="accountsContactName" required />
          </div>

          <div class="field">
            <label for="accountsContactNumber">Accounts Contact Number *</label>
            <input id="accountsContactNumber" name="accountsContactNumber" required />
          </div>

          <div class="field" style="grid-column: 1 / -1;">
            <label for="accountsEmail">Accounts Email *</label>
            <input id="accountsEmail" name="accountsEmail" type="email" required />
          </div>

          <div class="field">
            <label for="mainContactName">Main Contact Name *</label>
            <input id="mainContactName" name="mainContactName" required />
          </div>

          <div class="field">
            <label for="mainContactNumber">Main Contact Number *</label>
            <input id="mainContactNumber" name="mainContactNumber" required />
          </div>

          <div class="field" style="grid-column: 1 / -1;">
            <label for="mainContactEmail">Main Contact Email *</label>
            <input id="mainContactEmail" name="mainContactEmail" type="email" required />
          </div>
        </div>

        <!-- CANCELLATION POLICY -->
        <div class="section" style="margin-top: 16px;">
          <h2>Cancellation Policy</h2>
          <p class="desc" style="margin-bottom: 10px;">
            Please note: cancellations with insufficient notice may incur charges depending on engineer allocation and travel already arranged.
          </p>

          <div class="row" style="margin-top: 10px;">
            <label style="display:flex;align-items:center;gap:10px;color:rgba(229,231,235,0.9);font-weight:700;">
              <input type="checkbox" id="acceptPolicy" />
              I confirm I have read and accept the cancellation policy.
            </label>
          </div>
        </div>

        <div class="row">
          <button class="btn" type="submit">Submit</button>
          <div class="status" id="status" aria-live="polite"></div>
        </div>
      </form>
    </section>

    <!-- MORE SERVICES -->
    <section class="section" id="services">
      <h2>More Services</h2>
      <p class="desc">
        SmartFits supports nationwide deployment across multiple product lines including telematics, cameras, safety systems and fleet software rollouts.
        If you require additional services, please contact <strong>support@smartfits.co.uk</strong>.
      </p>
    </section>

    <!-- TEAM -->
    <section class="section" id="team">
      <h2>SmartFits Installations Team</h2>

      <!-- SALES -->
      <div class="teamBlock">
        <h3>Sales &amp; Business Development</h3>
        <p>Our Sales &amp; Business Development team builds relationships and communicates the value of our solutions to ensure your fleet and safety needs are met.</p>

        <div class="teamGrid">
          <div class="person" role="button" tabindex="0"
               data-name="Tara Hassall"
               data-role="Managing Director"
               data-email="tara@smartfits.co.uk"
               data-phone="">
            <img class="avatar" src="/images/tara_hassall.png" alt="Tara Hassall" />
            <div class="personText">
              <div class="personName">Tara Hassall</div>
              <div class="personRole">Managing Director</div>
            </div>
          </div>

          <div class="person" role="button" tabindex="0"
               data-name="Charlie Inger"
               data-role="Sales &amp; Business Development Manager"
               data-email="charlie@smartfits.co.uk"
               data-phone="">
            <img class="avatar" src="/images/charlie_inger.png" alt="Charlie Inger" />
            <div class="personText">
              <div class="personName">Charlie Inger</div>
              <div class="personRole">Sales &amp; Business Development Manager</div>
            </div>
          </div>
        </div>
      </div>

      <!-- CUSTOMER SUCCESS -->
      <div class="teamBlock">
        <h3>Customer Success Team</h3>
        <p>Our Customer Success Team provides ongoing assistance and guidance, ensuring you get the most from your installations and fleet systems.</p>

        <div class="teamGrid">
          <div class="person" role="button" tabindex="0"
               data-name="Emma Sumner"
               data-role="Customer Success Team Leader"
               data-email="emma@smartfits.co.uk"
               data-phone="">
            <img class="avatar" src="/images/emma_sumner.png" alt="Emma Sumner" />
            <div class="personText">
              <div class="personName">Emma Sumner</div>
              <div class="personRole">Customer Success Team Leader</div>
            </div>
          </div>

          <div class="person" role="button" tabindex="0"
               data-name="Kelly Mullen"
               data-role="Customer Success Team Member"
               data-email="kelly@smartfits.co.uk"
               data-phone="">
            <img class="avatar" src="/images/kelly_mullen.png" alt="Kelly Mullen" />
            <div class="personText">
              <div class="personName">Kelly Mullen</div>
              <div class="personRole">Customer Success Team Member</div>
            </div>
          </div>

          <div class="person" role="button" tabindex="0"
               data-name="Aleks Fossick"
               data-role="Customer Success Team Member"
               data-email="aleks@smartfits.co.uk"
               data-phone="">
            <img class="avatar" src="/images/aleks_fossick.png" alt="Aleks Fossick" />
            <div class="personText">
              <div class="personName">Aleks Fossick</div>
              <div class="personRole">Customer Success Team Member</div>
            </div>
          </div>
        </div>
      </div>

      <!-- OPS -->
      <div class="teamBlock">
        <h3>Project Coordinators / Field Operations Support</h3>
        <p>Coordinating advanced installations and large-scale deployments, ensuring every complex project runs smoothly and on time.</p>

        <div class="teamGrid">
          <div class="person" role="button" tabindex="0"
               data-name="Roz Hardwick"
               data-role="Operations Lead"
               data-email="roz@smartfits.co.uk"
               data-phone="">
            <img class="avatar" src="/images/roz_hardwick.png" alt="Roz Hardwick" />
            <div class="personText">
              <div class="personName">Roz Hardwick</div>
              <div class="personRole">Operations Lead</div>
            </div>
          </div>

          <div class="person" role="button" tabindex="0"
               data-name="Ellie Topliss"
               data-role="Project Coordinator"
               data-email="ellie.topliss@smartfits.co.uk"
               data-phone="">
            <img class="avatar" src="/images/ellie_topliss.png" alt="Ellie Topliss" />
            <div class="personText">
              <div class="personName">Ellie Topliss</div>
              <div class="personRole">Project Coordinator</div>
            </div>
          </div>

          <div class="person" role="button" tabindex="0"
               data-name="Sophie Turner"
               data-role="Project Coordinator"
               data-email="sophie@smartfits.co.uk"
               data-phone="">
            <img class="avatar" src="/images/sophie_turner.png" alt="Sophie Turner" />
            <div class="personText">
              <div class="personName">Sophie Turner</div>
              <div class="personRole">Project Coordinator</div>
            </div>
          </div>
        </div>
      </div>

    </section>
  </div>

  <!-- ===================== ADMIN MODAL ===================== -->
  <div class="modalBackdrop" id="adminModal" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-label="Admin Dashboard">
      <div class="modalHeader">
        <h3 class="modalTitle">Admin Dashboard</h3>
        <button class="closeBtn" id="closeAdminBtn" type="button">Close</button>
      </div>

      <div class="modalBody">

        <!-- ONLY shows until signed in -->
        <div id="adminSignInPanel" class="adminCard">
          <h3>Admin Sign In</h3>
          <p class="small">Sign in to access the admin dashboard.</p>

          <div class="adminGrid">
            <div class="field">
              <label for="adminEmail">Email</label>
              <input id="adminEmail" type="email" autocomplete="username" />
            </div>

            <div class="field">
              <label for="adminPassword">Password</label>
              <input id="adminPassword" type="password" autocomplete="current-password" />
            </div>
          </div>

          <div class="adminRow">
            <button class="btnSecondary closeBtn" id="adminClearBtn" type="button">Clear</button>
            <button class="btn" id="adminLoginBtn" type="button">Sign in</button>
          </div>

          <div class="status" id="adminStatus" aria-live="polite"></div>
        </div>

        <!-- Hidden until signed in -->
        <div id="adminDashboardPanel" style="display:none;">

          <div class="adminCard">
            <div style="display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap;">
              <div class="small" id="signedInText"></div>
              <button class="btnSecondary closeBtn" id="logoutBtn" type="button">Log out</button>
            </div>
          </div>

          <div class="adminCard">
            <h3>Customer Onboarding Forms</h3>
            <p class="small">Search by file name. Optionally enable date filters.</p>

            <div class="field">
              <label for="fileQuery">Search by file name</label>
              <input id="fileQuery" placeholder="e.g. Tesco, RAC, 2026-01" />
            </div>

            <div class="adminRow" style="margin-top:10px;">
              <div class="inlineToggle" id="dateToggleBtn">Search by date too?</div>
              <button class="btn" id="fileSearchBtn" type="button" style="margin-left:auto;">Search</button>
            </div>

            <div class="adminGrid" id="dateFilters" style="display:none;margin-top:12px;">
              <div class="field">
                <label for="fileFrom">From</label>
                <input id="fileFrom" type="date" />
              </div>
              <div class="field">
                <label for="fileTo">To</label>
                <input id="fileTo" type="date" />
              </div>
            </div>

            <table class="table">
              <thead>
                <tr>
                  <th>File Name</th>
                  <th>Created</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody id="filesTbody">
                <tr>
                  <td colspan="3" style="color:rgba(229,231,235,0.65);padding:12px 8px;">Search to view files.</td>
                </tr>
              </tbody>
            </table>
          </div>

          <div class="adminCard">
            <h3>Send Welcome Email</h3>
            <p class="small">This downloads a ready-to-send email file for Outlook/Mail so it sends from your own account.</p>

            <div class="adminGrid">
              <div class="field">
                <label for="welcomeCompany">Customer / Company Name *</label>
                <input id="welcomeCompany" />
              </div>

              <div class="field">
                <label for="welcomeContact">Customer Contact Name (optional)</label>
                <input id="welcomeContact" />
              </div>
            </div>

            <div class="field" style="margin-top:12px;">
              <label for="welcomeEmail">Customer Email Address *</label>
              <input id="welcomeEmail" type="email" />
            </div>

            <div class="adminRow">
              <button class="btn" id="openEmlBtn" type="button" style="margin-left:auto;">Download email to send</button>
            </div>

            <div class="status" id="welcomeStatus" aria-live="polite"></div>
          </div>

          <!-- Logs hidden unless user has permission -->
          <div class="adminCard" id="logsPanel" style="display:none;">
            <h3>Activity Logs</h3>
            <p class="small">Click a row to view full details.</p>

            <div class="adminGrid">
              <div class="field">
                <label for="logsFrom">From</label>
                <input id="logsFrom" type="date" />
              </div>
              <div class="field">
                <label for="logsTo">To</label>
                <input id="logsTo" type="date" />
              </div>
              <div class="field">
                <label for="logsEmailContains">Admin email contains</label>
                <input id="logsEmailContains" placeholder="e.g. finley@" />
              </div>
              <div class="field">
                <label for="logsActionType">Action type</label>
                <select id="logsActionType">
                  <option value="ALL">All</option>
                  <option value="LOGIN">LOGIN</option>
                  <option value="DELETE_FILE">DELETE_FILE</option>
                  <option value="SEND_WELCOME_EMAIL">SEND_WELCOME_EMAIL</option>
                </select>
              </div>
            </div>

            <div class="adminRow">
              <button class="btn" id="loadLogsBtn" type="button" style="margin-left:auto;">Load logs</button>
            </div>

            <table class="table">
              <thead>
                <tr>
                  <th>Timestamp</th>
                  <th>User</th>
                  <th>Action</th>
                </tr>
              </thead>
              <tbody id="logsTbody">
                <tr>
                  <td colspan="3" style="color:rgba(229,231,235,0.65);padding:12px 8px;">Load logs to view activity.</td>
                </tr>
              </tbody>
            </table>
          </div>

        </div>
      </div>
    </div>
  </div>

  <!-- ===================== PROFILE MODAL ===================== -->
  <div class="modalBackdrop" id="profileModal" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-label="Profile">
      <div class="modalHeader">
        <h3 class="modalTitle" id="profileName">Profile</h3>
        <button class="closeBtn" id="closeProfileBtn" type="button">Close</button>
      </div>

      <div class="modalBody">
        <div class="profileBox">
          <div class="role" id="profileRole"></div>

          <div class="sectionTitle">Contact Details</div>
          <div class="contactLine" id="profileEmailLine"></div>
          <div class="contactLine" id="profilePhoneLine"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- ===================== LOG DETAIL MODAL ===================== -->
  <div class="modalBackdrop" id="logDetailModal" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-label="Log Details">
      <div class="modalHeader">
        <h3 class="modalTitle">Log Details</h3>
        <button class="closeBtn" id="closeLogDetailBtn" type="button">Close</button>
      </div>
      <div class="modalBody" id="logDetailBody"></div>
    </div>
  </div>

  <!-- ✅ Make sure this path matches your repo exactly -->
  <script src="/assets/app.js" defer></script>
</body>
</html>
